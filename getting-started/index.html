<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Getting Started - Alex Language</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Getting Started";
    var mkdocs_page_input_path = "getting-started.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> Alex Language</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="..">Alex Language</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../installation/">Installation</a>
	    </li>
          
            <li class="toctree-l1 current">
		
    <a class="current" href="./">Getting Started</a>
    <ul class="subnav">
            
    <li class="toctree-l2"><a href="#introduction">Introduction</a></li>
    

    <li class="toctree-l2"><a href="#tel0">TEL0</a></li>
    

    <li class="toctree-l2"><a href="#abstract-syntax">Abstract Syntax</a></li>
    

    <li class="toctree-l2"><a href="#revisitor">Revisitor</a></li>
    

    <li class="toctree-l2"><a href="#semantics">Semantics</a></li>
    
        <ul>
        
            <li><a class="toctree-l3" href="#pretty-printing">Pretty Printing</a></li>
        
            <li><a class="toctree-l3" href="#evaluation">Evaluation</a></li>
        
            <li><a class="toctree-l3" href="#execution">Execution</a></li>
        
        </ul>
    

    <li class="toctree-l2"><a href="#conclusion">Conclusion</a></li>
    

    <li class="toctree-l2"><a href="#next">Next</a></li>
    
        <ul>
        
            <li><a class="toctree-l3" href="#using-alex">Using Alex</a></li>
        
            <li><a class="toctree-l3" href="#emf-ecosystem">EMF Ecosystem</a></li>
        
        </ul>
    

    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../extension/">Extension</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../composition/">Composition</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../revisitor/">Revisitor</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../publications/">Publications</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../about/">About</a>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">Alex Language</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>Getting Started</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">#</a></h1>
<p>This page introduces the main concepts of Alex by following the development of a small expression language.</p>
<p>For more details about the language see TODO.</p>
<h1 id="tel0">TEL0<a class="headerlink" href="#tel0" title="Permanent link">#</a></h1>
<p>Tiny Expression Language 0 (TEL0) is a toy expression language with two concepts:</p>
<ul>
<li>Integer Literal (e.g. 0, 1...)</li>
<li>Sum operation (e.g. +)</li>
</ul>
<h1 id="abstract-syntax">Abstract Syntax<a class="headerlink" href="#abstract-syntax" title="Permanent link">#</a></h1>
<p>We define the abstract syntax using ecore.
This <a href="https://eclipsesource.com/blogs/tutorials/emf-tutorial/">tutorial</a> explains in details how to use ecore to define a metamodel.</p>
<p>In order to understand the rest of this introduction, you only need to understand that ecore is a formalism to define metamodels and allows the generation of Java code that conforms to this definition.</p>
<p>From the definition of TEL0, we define the following ecore model:
<img alt="" src="../tel0.svg" /></p>
<p>We introduce the <code>Exp</code> abstract class in order to allow the recursive definition of sums (e.g.  1 + 2 + 3 + 4).</p>
<p>From this metamodel definition we generate, using EMF, a set of java classes.</p>
<p>You can find the implementation of TEL0 abstract syntax in <a href="https://github.com/manuelleduc/alex/tree/master/examples/tel0.model">github</a>.</p>
<h1 id="revisitor">Revisitor<a class="headerlink" href="#revisitor" title="Permanent link">#</a></h1>
<p>In addition to the set of java class, Alex offers the generation of a abstract, visitor-like, interface called a <em>Revisitor</em>.</p>
<p>To understand this tutorial, and to use Alex, it is not required to understand the Revisitor mechanism.
Just know that it's generation is required in order to be able to define a semantics on top of the abstract syntax.</p>
<p>The interested reader can consult the <a href="../revisitor/">revisitor</a> page to understand the internal details.</p>
<h1 id="semantics">Semantics<a class="headerlink" href="#semantics" title="Permanent link">#</a></h1>
<p>Once we have defined the abstract syntax of our language, we want to give it some meaning.</p>
<p>The good news is, using Alex it is easy to define multiple meanings to a single abstract syntax in a modular way.</p>
<p>We will show how to add a pretty printer and an evaluation semantics for TEL0, in a modular way.</p>
<h2 id="pretty-printing">Pretty Printing<a class="headerlink" href="#pretty-printing" title="Permanent link">#</a></h2>
<p>The pretty printer is a simple way to transform the object graph of an instance of the abstract syntax to a user readable string.</p>
<p>For instance <code>Add (LitVal(1), Add(LitVal(2), LitVal(3)))</code> will be pretty printed to <code>"1 + 2 + 3"</code>.</p>
<p>The following Alex program is the definition of the pretty print semantics for TEL0.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">behavior</span> <span class="n">prettyprint</span>

<span class="kn">import</span> <span class="nn">ecore</span> <span class="s2">&quot;platform:/resource/tel0.model/model/tel0.ecore&quot;</span>

<span class="nb">open</span> <span class="n">abstract</span> <span class="k">class</span> <span class="nc">Exp</span> <span class="p">{</span>
    <span class="n">abstract</span> <span class="k">def</span> <span class="nf">String</span> <span class="k">print</span><span class="p">()</span>
<span class="p">}</span>

<span class="nb">open</span> <span class="k">class</span> <span class="nc">LitVal</span> <span class="p">{</span>
    <span class="n">override</span> <span class="n">String</span> <span class="k">print</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">toString</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="nb">open</span> <span class="k">class</span> <span class="nc">Sum</span> <span class="p">{</span>
    <span class="n">override</span> <span class="n">String</span> <span class="k">print</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">alg</span><span class="o">.</span><span class="err">$</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">lhs</span><span class="p">)</span><span class="o">.</span><span class="k">print</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39; + &#39;</span> <span class="o">+</span> <span class="n">alg</span><span class="o">.</span><span class="err">$</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">rhs</span><span class="p">)</span><span class="o">.</span><span class="k">print</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>

<p>This definition requires a few explanations.</p>
<p><strong>Line 1:</strong> Definition of the name of the semantics.
Pretty much similar to a package definition.</p>
<p><strong>Line 3:</strong> Import of the abstract syntax.
It defines the set of class on which we are able to define operations.</p>
<p><strong>Lines 5-7:</strong> Definition of the print operation on the Exp abstract class.
As with every object-oriented language, it enforce that each child of <code>Exp</code> must provide a concrete implementation of the print method.</p>
<p><strong>Lines 9-13:</strong> Definition of the print operation for the LitVal class.<br />
We want use the toString operation to convert the long value to a string.<br />
But we are defining the pretty print semantics externally, consequently we don't have a direct access to the value field of the syntax.<br />
To have access to the syntactic values from the semantics, we must use the <code>obj</code> field provided by Alex for every open class, before being able to convert it to a string.</p>
<p><strong>Lines 15-19:</strong> Definition of the print operation for the Sum class.
To pretty print a sum, we need to obtains the result of the print method for the left hand side (lhs) and right hand side (rhs) fields of the Sum class.</p>
<p>But what we have currently is the <code>obj</code> field which gives use access to the syntactic part of the Sum class, which contains the lhs and rhs Exp expressions.</p>
<p>Consequently, we don't have access to the print operation on the field so far.</p>
<p>To do so, we fist needs to converts the syntactic value to semantics operations, using the <code>alg</code> field, also provided by Alex for each open class.
This alg fields contains an instance of the currently defined semantics, in the form of a revisitor.</p>
<p>The revisitor provides a methods called <code>$</code> which take a syntactic object (e.g. Exp, Sum, LitVal) and returns a semantic operation, with all the operations defined in the Alex semantics.</p>
<p>For instance alg.$(obj.lhs) returns an semantic operation with a print method.</p>
<p>The good thing is, since obj.lhs is an abstract Exp object, we don't know statically if the returned semantic object will be for a Sum or a LitVal object, still we know that the returned value will be a string that we will be able to concatenate before returning the resulting string.</p>
<p><strong>Summary</strong></p>
<p>So far we have defined a first semantics for TEL0, which allow to pretty print arbitrary instances of TEL0 abstract syntax.</p>
<p>A working implementation of TEL0 pretty printing is available in <a href="https://github.com/manuelleduc/alex/tree/master/examples/tel0.prettyprint">github</a></p>
<h2 id="evaluation">Evaluation<a class="headerlink" href="#evaluation" title="Permanent link">#</a></h2>
<p>Most of the useful concept of Alex are already covered by the definition of the pretty printing semantics.</p>
<p>To highlight the ability of define new semantics modularily (i.e. without having to impact previously defined source code) for a single abstract syntax, we will show how to implement a evaluation semantics for TEL0.</p>
<p>We simply have to create a new alex file, give it a new behavior name, and import the same ecore metamodel.</p>
<p>Of course the signature of the open class methods and will be different.</p>
<p>```alex
behavior evaluate</p>
<p>import ecore "platform:/resource/tel0.model/model/tel0.ecore"</p>
<p>open abstract class Exp {
    abstract def long eval()
}</p>
<p>open class LitVal {
    override long eval() {
        obj.value
    }
}</p>
<p>open class Sum {
    override long eval() {
        alg.$(obj.lhs).eval() + alg.$(obj.rhs).eval()
    }
}
 ```</p>
<p>We can observe that the structure is quite close to the pretty printer, the main different is the return type of eval, a long instead of a String.</p>
<p>Consequently, if we execute the same <code>Add (LitVal(1), Add(LitVal(2), LitVal(3)))</code> program we obtains <code>6</code> instead of  <code>"1 + 2 + 3"</code>.</p>
<p>A working implementation of TEL0 pretty printing is available in <a href="https://github.com/manuelleduc/alex/tree/master/examples/tel0.evaluate">github</a>.</p>
<h2 id="execution">Execution<a class="headerlink" href="#execution" title="Permanent link">#</a></h2>
<p>So far we have defined two semantics for TEL0. But the interesting part is to be able to use our language to execute programs.</p>
<p>The <code>tel0.tests</code> project, available on <a href="https://github.com/manuelleduc/alex/tree/master/examples/tel0.tests">github</a>, contains a single test class <code>tel0.tests.Tel0Test</code> which showcase how to use our language.</p>
<p>The source Below is a commented version of the <code>Tel0Test</code> class.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kn">package</span> <span class="nn">tel0.tests</span><span class="o">;</span>

<span class="c1">// JUnit 5 imports.</span>
<span class="kn">import</span> <span class="nn">org.junit.jupiter.api.Assertions</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.junit.jupiter.api.Test</span><span class="o">;</span>

<span class="c1">// imports of the two semantics, in the form of the revisitor </span>
<span class="c1">// generated from the *.ale semantics definition.</span>
<span class="kn">import</span> <span class="nn">evaluate.revisitor.impl.EvaluateRevisitor</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">prettyprint.revisitor.impl.PrettyprintRevisitor</span><span class="o">;</span>

<span class="c1">// import of the abstract syntax concepts.</span>
<span class="kn">import</span> <span class="nn">tel0.model.tel0.Exp</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">tel0.model.tel0.LitVal</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">tel0.model.tel0.Sum</span><span class="o">;</span>
<span class="c1">// and the EMF factory used to instantiate the concepts.</span>
<span class="kn">import</span> <span class="nn">tel0.model.tel0.Tel0Factory</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Tel0Test</span> <span class="o">{</span>

    <span class="cm">/**</span>
<span class="cm">     * Instantiation of the revisitors. The imported revisitors are </span>
<span class="cm">     * Java 8 interfaces with default methods. We define anonymous </span>
<span class="cm">     * classes from the interfaces in order to be able to </span>
<span class="cm">     * instantiate them (cf. https://docs.oracle.com/javase/tutorial/java/javaOO/anonymousclasses.html).</span>
<span class="cm">     */</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">EvaluateRevisitor</span> <span class="n">revExec</span>
        <span class="o">=</span> <span class="k">new</span> <span class="n">EvaluateRevisitor</span><span class="o">()</span> <span class="o">{};</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">PrettyprintRevisitor</span> <span class="n">revPrint</span>
        <span class="o">=</span> <span class="k">new</span> <span class="n">PrettyprintRevisitor</span><span class="o">()</span> <span class="o">{};</span>

    <span class="cm">/**</span>
<span class="cm">     * Creation of a simple TEL0 program by metamodel manipulation.</span>
<span class="cm">     * </span>
<span class="cm">     * @return 1 + 2</span>
<span class="cm">     */</span>
    <span class="kd">private</span> <span class="n">Exp</span> <span class="nf">createModel0</span><span class="o">()</span> <span class="o">{</span>

        <span class="c1">// Creation of a sum operation.</span>
        <span class="kd">final</span> <span class="n">Sum</span> <span class="n">exp</span> <span class="o">=</span> <span class="n">Tel0Factory</span><span class="o">.</span><span class="na">eINSTANCE</span><span class="o">.</span><span class="na">createSum</span><span class="o">();</span>
        <span class="c1">// Creation a literal value with the value 1.</span>
        <span class="kd">final</span> <span class="n">LitVal</span> <span class="n">x</span> <span class="o">=</span> <span class="n">Tel0Factory</span><span class="o">.</span><span class="na">eINSTANCE</span><span class="o">.</span><span class="na">createLitVal</span><span class="o">();</span>
        <span class="n">x</span><span class="o">.</span><span class="na">setValue</span><span class="o">(</span><span class="mi">1L</span><span class="o">);</span>
        <span class="c1">// Affectation of the value 1 to the left-hand side of </span>
        <span class="c1">// the sum.</span>
        <span class="n">exp</span><span class="o">.</span><span class="na">setLhs</span><span class="o">(</span><span class="n">x</span><span class="o">);</span>

        <span class="c1">// Creation and affectation of the value 2 to the right</span>
        <span class="c1">// hand side of the sum.</span>
        <span class="kd">final</span> <span class="n">LitVal</span> <span class="n">y</span> <span class="o">=</span> <span class="n">Tel0Factory</span><span class="o">.</span><span class="na">eINSTANCE</span><span class="o">.</span><span class="na">createLitVal</span><span class="o">();</span>
        <span class="n">y</span><span class="o">.</span><span class="na">setValue</span><span class="o">(</span><span class="mi">2L</span><span class="o">);</span>
        <span class="n">exp</span><span class="o">.</span><span class="na">setRhs</span><span class="o">(</span><span class="n">y</span><span class="o">);</span>

        <span class="k">return</span> <span class="n">exp</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Execution test.</span>
<span class="cm">     */</span>
    <span class="nd">@Test</span>
    <span class="kt">void</span> <span class="nf">test0Exec</span><span class="o">()</span> <span class="o">{</span>
        <span class="kd">final</span> <span class="n">Exp</span> <span class="n">exp</span> <span class="o">=</span> <span class="n">createModel0</span><span class="o">();</span>
        <span class="n">Assertions</span><span class="o">.</span><span class="na">assertEquals</span><span class="o">(</span><span class="mi">3L</span><span class="o">,</span> <span class="n">revExec</span><span class="o">.</span><span class="na">$</span><span class="o">(</span><span class="n">exp</span><span class="o">).</span><span class="na">eval</span><span class="o">());</span>
    <span class="o">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Pretty print test.</span>
<span class="cm">     */</span>
    <span class="nd">@Test</span>
    <span class="kt">void</span> <span class="nf">test0Print</span><span class="o">()</span> <span class="o">{</span>
        <span class="kd">final</span> <span class="n">Exp</span> <span class="n">exp</span> <span class="o">=</span> <span class="n">createModel0</span><span class="o">();</span>
        <span class="n">Assertions</span><span class="o">.</span><span class="na">assertEquals</span><span class="o">(</span><span class="s">&quot;1 + 2&quot;</span><span class="o">,</span> <span class="n">revPrint</span><span class="o">.</span><span class="na">$</span><span class="o">(</span><span class="n">exp</span><span class="o">).</span><span class="na">print</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td></tr></table>

<h1 id="conclusion">Conclusion<a class="headerlink" href="#conclusion" title="Permanent link">#</a></h1>
<p>So far we have implemented an abstract syntax and two semantics for the TEL0 toy language.</p>
<p>It can look deceiving, but doing so we learned most of the main concepts required to build larger languages.</p>
<h1 id="next">Next<a class="headerlink" href="#next" title="Permanent link">#</a></h1>
<h2 id="using-alex">Using Alex<a class="headerlink" href="#using-alex" title="Permanent link">#</a></h2>
<p>The main point of Alex not covered by this introduction is the language <a href="../extension/">extension</a> and <a href="../composition/">composition</a> mechanisms.</p>
<p>In addition, the code generation mechanisms underlying Alex are covered in the <a href="../revisitor/">Revisitor</a> page.</p>
<h2 id="emf-ecosystem">EMF Ecosystem<a class="headerlink" href="#emf-ecosystem" title="Permanent link">#</a></h2>
<p>Once a language have been defined using EMF, our language can be improved in several ways:</p>
<ul>
<li>A textual grammar with <a href="https://www.eclipse.org/Xtext/">Xtext</a>.</li>
<li>A graphical representation with <a href="https://www.obeo.fr/fr/produits/eclipse-sirius">Sirius</a>.</li>
</ul>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../extension/" class="btn btn-neutral float-right" title="Extension">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../installation/" class="btn btn-neutral" title="Installation"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../installation/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../extension/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>

</body>
</html>
